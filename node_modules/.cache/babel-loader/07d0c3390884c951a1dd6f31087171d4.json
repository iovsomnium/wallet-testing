{"ast":null,"code":"var _jsxFileName = \"/Users/deepinthepowderblue/Documents/GitHub/testingWallet/web3-connect-phantom-wallet/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\n/**\n * @description gets Phantom provider, if it exists\n */\nconst getProvider = () => {\n  if (\"solana\" in window) {\n    // @ts-ignore\n    const provider = window.solana;\n    if (provider.isPhantom) return provider;\n  }\n};\n\nfunction App() {\n  _s();\n\n  const [provider, setProvider] = useState(undefined);\n  const [walletKey, setWalletKey] = useState(undefined);\n  /**\n   * @description prompts user to connect wallet if it exists\n   */\n\n  const connectWallet = async () => {\n    // @ts-ignore\n    const {\n      solana\n    } = window;\n\n    if (solana) {\n      try {\n        const response = await solana.connect();\n        console.log('wallet account ', response.publicKey.toString());\n        setWalletKey(response.publicKey.toString());\n      } catch (err) {// { code: 4001, message: 'User rejected the request.' }\n      }\n    }\n  };\n  /*\n  * @description disconnect Phantom wallet\n  */\n\n\n  const disconnectWallet = async () => {\n    // @ts-ignore\n    const {\n      solana\n    } = window;\n\n    if (walletKey && solana) {\n      await solana.disconnect();\n      setWalletKey(undefined);\n    }\n  }; // detect phantom provider exists\n\n\n  useEffect(() => {\n    const provider = getProvider();\n    if (provider) setProvider(provider);else setProvider(undefined);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Tutorial: Connect to Phantom Wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), provider && !walletKey && /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          fontSize: \"16px\",\n          padding: \"15px\",\n          fontWeight: \"bold\",\n          borderRadius: \"5px\"\n        },\n        onClick: connectWallet,\n        children: \"Connect to Phantom Wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this), provider && walletKey && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"Connected account \", walletKey]\n      }, void 0, true), !provider && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"No provider found. Install\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://phantom.app/\",\n          children: \"Phantom Browser extension\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this), provider && walletKey && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Connected account \", walletKey]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            fontSize: \"16px\",\n            padding: \"15px\",\n            fontWeight: \"bold\",\n            borderRadius: \"5px\",\n            margin: \"15px auto\"\n          },\n          onClick: disconnectWallet,\n          children: \"Disconnect\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Built by\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://twitter.com/arealesramirez\",\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          className: \"twitter-link\",\n          children: \"@arealesramirez\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 1\n  }, this);\n}\n\n_s(App, \"6g8MAGkpkTFIOi2eHXX17Pxl4Eo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","getProvider","window","provider","solana","isPhantom","App","setProvider","undefined","walletKey","setWalletKey","connectWallet","response","connect","console","log","publicKey","toString","err","disconnectWallet","disconnect","fontSize","padding","fontWeight","borderRadius","margin"],"sources":["/Users/deepinthepowderblue/Documents/GitHub/testingWallet/web3-connect-phantom-wallet/src/App.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport logo from './logo.svg';\nimport './App.css';\n\nimport {\n  PublicKey,\n  Transaction,\n} from \"@solana/web3.js\";\n\ntype DisplayEncoding = \"utf8\" | \"hex\";\ntype PhantomEvent = \"disconnect\" | \"connect\" | \"accountChanged\";\ntype PhantomRequestMethod =\n  | \"connect\"\n  | \"disconnect\"\n  | \"signTransaction\"\n  | \"signAllTransactions\"\n  | \"signMessage\";\n\ninterface ConnectOpts {\n  onlyIfTrusted: boolean;\n}\n\ninterface PhantomProvider {\n  publicKey: PublicKey | null;\n  isConnected: boolean | null;\n  signTransaction: (transaction: Transaction) => Promise<Transaction>;\n  signAllTransactions: (transactions: Transaction[]) => Promise<Transaction[]>;\n  signMessage: (\n    message: Uint8Array | string,\n    display?: DisplayEncoding\n  ) => Promise<any>;\n  connect: (opts?: Partial<ConnectOpts>) => Promise<{ publicKey: PublicKey }>;\n  disconnect: () => Promise<void>;\n  on: (event: PhantomEvent, handler: (args: any) => void) => void;\n  request: (method: PhantomRequestMethod, params: any) => Promise<unknown>;\n}\n\n/**\n * @description gets Phantom provider, if it exists\n */\nconst getProvider = (): PhantomProvider | undefined => {\n  if (\"solana\" in window) {\n    // @ts-ignore\n    const provider = window.solana as any;\n    if (provider.isPhantom) return provider as PhantomProvider;\n  }\n};\n\nfunction App() {\n  const [provider, setProvider] = useState<PhantomProvider | undefined>(\n    undefined\n  );\n  \n  const [walletKey, setWalletKey] = useState<PhantomProvider | undefined>(\n    undefined\n  );\n\n  /**\n   * @description prompts user to connect wallet if it exists\n   */\n  const connectWallet = async () => {\n    // @ts-ignore\n    const { solana } = window;\n\n    if (solana) {\n      try {\n        const response = await solana.connect();\n        console.log('wallet account ', response.publicKey.toString());\n        setWalletKey(response.publicKey.toString());\n      } catch (err) {\n       // { code: 4001, message: 'User rejected the request.' }\n      }\n    }\n  };\n\n    /*\n   * @description disconnect Phantom wallet\n   */\n  const disconnectWallet = async () => {\n    // @ts-ignore\n    const { solana } = window;\n\n    if (walletKey && solana) {\n      await (solana as PhantomProvider).disconnect();\n      setWalletKey(undefined);\n    }\n  };\n  \n// detect phantom provider exists\n  useEffect(() => {\n    const provider = getProvider();\n\n    if (provider) setProvider(provider);\n    else setProvider(undefined);\n  }, []);\n  return (\n<div className=\"App\">\n      <header className=\"App-header\">\n        <h2>Tutorial: Connect to Phantom Wallet</h2>\n        {provider && !walletKey && (\n          <button\n            style={{\n              fontSize: \"16px\",\n              padding: \"15px\",\n              fontWeight: \"bold\",\n              borderRadius: \"5px\",\n            }}\n            onClick={connectWallet}\n          >\n            Connect to Phantom Wallet\n          </button>\n        )}\n\n        {provider && walletKey && <>Connected account {walletKey}</>}\n\n        {!provider && (\n          <p>\n            No provider found. Install{\" \"}\n            <a href=\"https://phantom.app/\">Phantom Browser extension</a>\n          </p>\n        )}\n\n        {provider && walletKey && (\n          <div>\n            <p><>Connected account {walletKey}</></p>\n\n            <button\n              style={{\n                fontSize: \"16px\",\n                padding: \"15px\",\n                fontWeight: \"bold\",\n                borderRadius: \"5px\",\n                margin: \"15px auto\",\n              }}\n              onClick={disconnectWallet}\n            >\n              Disconnect\n            </button>\n          </div>\n        )}\n\n        <p>\n          Built by{\" \"}\n          <a\n            href=\"https://twitter.com/arealesramirez\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            className=\"twitter-link\"\n          >\n            @arealesramirez\n          </a>\n        </p>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}